<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>Coalition Builder</title>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>


    <style>
        body {
            color: black;
            font-family: 'Segoe UI';
        }

        h3 {
            color: black;
            text-align: left;
            vertical-align: top;
            font-size: 20px;
            padding: 5px;
            margin: 5px;
        }

        h2 {
            font-family: 'Segoe UI Light';
            text-align: center;
        }

        button {
            padding: 5px;
            font-size: 30px;
            height: 100%;
            width: 100%;
        }

        input {
            width: 120%
        }

        .Color {
            width: 50%;
            padding: 5px;
        }

        div {
        }

        .Button {
            grid-row: 1/2;
            padding: 5px;
        }

        .scrollable {
            height: 100px;
            overflow-y: auto;
        }

        td {
            border: "solid";
        }

        .PollRow {
            background-color: #ffff;
        }

        .PollRow:hover {
                background-color: #b6ff00;
        }

        .highcharts-figure,
        .highcharts-data-table table {
            max-width: 100%;
            max-height: 100%;
            height: 100%;
        }


    </style>
</head>
<body>
    <div>
        <h2>Schmillies Australian Coaliton Calculator</h2>
        <h3>Click on a party to add the to a coaliton.</h3>
    </div>
    <div class="container-fluid" style="height:100%;width:100%;padding:2px;">
        <div id="TopRow" style="height:50%;">
            <div class="col-md-4" id="ChartID">
                <canvas style="width:50%" id="SmoothCircle">
                </canvas>
            </div>
            <div class="col-md-2">
                <h3 class="scrollable">
                    Selected Parties: <b id="elementList"></b>
                </h3>
                <h3>
                    Majority: <b id="Majority">false</b>
                </h3>
                <h3>
                    Type: <b id="Type"></b>
                </h3>
            </div>
            <div class="col-md-2">
                <button onclick="buttonClear()">Clear</button>
                <button onclick="ChangeMode()">Change Mode</button>
            </div>
            <div class="col-md-1">
                <h3>Majority Needed <b id="Threshold">50</b> </h3>
                <h3>Current Amount <b id="CurrentValue">0</b> </h3>
                <h3>Total <b id="CurrentTotal">0</b></h3>
            </div>
            <div class="col-md-3 Poll" style="height:50%;border-style:solid none solid solid;">
                <h3>
                    Based on Poll:
                </h3>
                <div class="scrollable" style="height:200px">
                    <table id="pollingData" style="width:100%;height:30px">
                    </table>
                </div>
            </div>
        </div>
    </div>
    <div id="BoxesContainer" style="padding:1%;border">
        <div id="PartyRow1" class="PartyRow">
        </div>
        <div id="PartyRow2" class="PartyRow">
        </div>
        <div id="PartyRow3" class="PartyRow">
        </div>
    </div>
    <div>
        <b> **PLESE NOTE ALL DATA IS TEST DATA AND FICTONAL, NOT TO BE USED AS COMMONTRY ON REAL WORLD DATA** </b> <br/>
        Known Bugs:
        <ul>
            <li>- Seat mode broken, only displays default data</li>
            <li>- Seat mode takes up way too much of table and leaves large white space</li>
            <li>- This bug list causes rendering issues</li>
            <li>- Currently doesn't doesn't allow for adding parties, can only change current values</li>
            <li>- All data is currently fictonal</li>
        </ul>
        If you find any additonal issues please report them to <a href="mailto:schmilly@proton.me">my email</a>
    </div>
</body>
</html>
<script src="./polling.js"></script>
<script src="./functions.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/item-series.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/export-data.js"></script>
<script src="https://code.highcharts.com/modules/accessibility.js"></script>
<script>
    var ctx = document.getElementById('SmoothCircle');
    var Type = "None"
    var PartyCount = 4;
    var PartyData = [25, 25, 25, 25];
    var SeatCount = [5, 5, 5, 5];
    var PrtyLabels = [PrtyNme.ALP, PrtyNme.Lib, PrtyNme.Nat, PrtyNme.Grn];
    var colors = [PartyColor.Labor, PartyColor.Liberal, PartyColor.Nationals, PartyColor.Greens];
    var Selected = [];
    var SeatMajority = 10;
    var Row = 1;
    var CurrentTotal = 1;
    var Seat = 0;
    //0 for % mode, 1 for Seat Mode

    var SmoothData = {
        type: 'doughnut',
        data: {
            labels: PrtyLabels,
            datasets: [{
                label: 'Count',
                data: PartyData,
                borderWidth: 1,
                backgroundColor: colors
            }]
        },
        options: {
            rotation: -90,
            circumference: 180,
            maintainAspectRatio: false,
            onClick: handleChartClick,
        }
    };

    ParlimentData = generateParlimentdata(colors, PrtyLabels, SeatCount, PartyCount);
    var HighChartsData = {
        chart: {
            type: 'item'
        },
        title: {
            text: 'Distribution of seats'
        },
        series: [{
            name: 'Representatives',
            keys: ['name', 'y', 'color'],
            data: ParlimentData,
            dataLabels: {
                enabled: false,
            },

            // Circular options
            startAngle: -90,
            endAngle: 90
        }],

        plotOptions: {
            series: {
                states: {
                    inactive: {
                        opacity: 1
                    }
                }
            }
        }
    };

    createPage();
    grabPolling();
    UpdateDisplayValues();

</script>
